<section class="flex min-h-screen items-center justify-center bg-slate-100 p-6">
  <mat-card appearance="outlined" class="w-full max-w-3xl shadow-none bg-white">
    <mat-card-header class="flex flex-col items-start gap-1">
      <mat-card-title class="text-xl font-semibold">Platform Health Overview</mat-card-title>
      <mat-card-subtitle>Verifies frontend ↔ backend connectivity in real time.</mat-card-subtitle>
      <mat-card-subtitle *ngIf="currentUser()" class="text-sm text-slate-500">
        Signed in as <span class="font-medium text-slate-700">{{ currentUser()?.email }}</span> · Role:
        <span class="font-medium uppercase">{{ currentUser()?.role }}</span>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div *ngIf="loading(); else result" class="flex items-center gap-3 text-slate-600">
        <mat-spinner diameter="32"></mat-spinner>
        <span>Requesting status from the backend...</span>
      </div>

      <ng-template #result>
        <div *ngIf="error(); else successState" class="flex items-center gap-3 text-red-600">
          <mat-icon fontIcon="error_outline"></mat-icon>
          <span>{{ error() }}</span>
        </div>

        <ng-template #successState>
          <div class="flex flex-col gap-2 text-blue-600">
            <div class="flex items-center gap-3">
              <mat-icon fontIcon="check_circle_outline"></mat-icon>
              <span class="text-lg font-medium">Healthy connection established</span>
            </div>
            <div class="rounded-md border border-blue-100 bg-blue-50 px-3 py-2 text-sm text-slate-700">
              <div class="font-medium text-slate-900">Backend response payload</div>
              <code class="block font-mono text-sm text-slate-800">{{ status()?.status }}</code>
            </div>
          </div>
        </ng-template>
      </ng-template>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-raised-button color="primary" (click)="runHealthCheck()" [disabled]="loading()">
        <mat-icon fontIcon="refresh"></mat-icon>
        <span class="ml-2">Retry</span>
      </button>
    </mat-card-actions>
  </mat-card>
</section>
